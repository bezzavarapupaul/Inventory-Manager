{"ast":null,"code":"import { PLATFORM_ID } from '@angular/core';\nimport { FormGroup, FormControl, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule, isPlatformBrowser } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction DashboardComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.addInventory());\n    });\n    i0.ɵɵtext(1, \"Add Item\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updateItem());\n    });\n    i0.ɵɵtext(1, \"Update Item\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_tr_23_Template_button_click_8_listener() {\n      const item_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.editItem(item_r5));\n    });\n    i0.ɵɵtext(9, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_tr_23_Template_button_click_10_listener() {\n      const item_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.deleteItem(item_r5.id));\n    });\n    i0.ɵɵtext(11, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.price);\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    router;\n    http;\n    platformId;\n    inventoryForm = new FormGroup({\n      name: new FormControl('', Validators.required),\n      quantity: new FormControl('', Validators.required),\n      price: new FormControl('', Validators.required)\n    });\n    items = [];\n    editMode = false;\n    selectedId = null;\n    constructor(router, http, platformId // ✅ Needed to avoid SSR crash\n    ) {\n      this.router = router;\n      this.http = http;\n      this.platformId = platformId;\n    }\n    ngOnInit() {\n      if (isPlatformBrowser(this.platformId)) {\n        this.loadInventory(); // ✅ Only run when browser renders\n      }\n    }\n    addInventory() {\n      if (!this.inventoryForm.valid) {\n        alert(\"Please fill all fields\");\n        return;\n      }\n      if (!isPlatformBrowser(this.platformId)) return; // ✅ Avoid SSR access\n      const payload = {\n        name: this.inventoryForm.value.name,\n        quantity: Number(this.inventoryForm.value.quantity),\n        price: Number(this.inventoryForm.value.price),\n        user_id: Number(localStorage.getItem(\"userId\")) // ✅ Read only in browser\n      };\n      console.log(\"Payload being sent:\", payload);\n      this.http.post(\"https://inventory-manager-k10i.onrender.com/inventory\", payload).subscribe({\n        next: () => {\n          alert(\"Item Added ✅\");\n          this.inventoryForm.reset();\n          this.loadInventory();\n        },\n        error: err => {\n          console.error(\"Error adding item:\", err);\n          alert(\"Could not add item ❌\");\n        }\n      });\n    }\n    loadInventory() {\n      if (!isPlatformBrowser(this.platformId)) return; // ✅ Prevent SSR crash\n      const userId = Number(localStorage.getItem(\"userId\"));\n      this.http.get(`https://inventory-manager-k10i.onrender.com/inventory/${userId}`).subscribe(data => {\n        this.items = data;\n      });\n    }\n    editItem(item) {\n      this.editMode = true;\n      this.selectedId = item.id;\n      this.inventoryForm.setValue({\n        name: item.name,\n        quantity: item.quantity,\n        price: item.price\n      });\n    }\n    updateItem() {\n      this.http.put(`https://inventory-manager-k10i.onrender.com/${this.selectedId}`, this.inventoryForm.value).subscribe(() => {\n        alert(\"Item Updated ✅\");\n        this.inventoryForm.reset();\n        this.editMode = false;\n        this.loadInventory();\n      });\n    }\n    deleteItem(id) {\n      this.http.delete(`https://inventory-manager-k10i.onrender.com/inventory/${id}`).subscribe(() => {\n        alert(\"Item Deleted ❌\");\n        this.loadInventory();\n      });\n    }\n    logout() {\n      if (isPlatformBrowser(this.platformId)) {\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"userId\");\n      }\n      this.router.navigate(['/login']);\n    }\n    static ɵfac = function DashboardComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DashboardComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(PLATFORM_ID));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 26,\n      vars: 4,\n      consts: [[3, \"formGroup\"], [\"type\", \"text\", \"placeholder\", \"Item Name\", \"formControlName\", \"name\"], [\"type\", \"number\", \"placeholder\", \"Quantity\", \"formControlName\", \"quantity\"], [\"type\", \"number\", \"placeholder\", \"Price\", \"formControlName\", \"price\"], [3, \"click\", 4, \"ngIf\"], [\"border\", \"1\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"dashboard works!\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"h2\");\n          i0.ɵɵtext(3, \"Inventory Dashboard\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"form\", 0);\n          i0.ɵɵelement(5, \"input\", 1)(6, \"input\", 2)(7, \"input\", 3);\n          i0.ɵɵtemplate(8, DashboardComponent_button_8_Template, 2, 0, \"button\", 4)(9, DashboardComponent_button_9_Template, 2, 0, \"button\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"hr\");\n          i0.ɵɵelementStart(11, \"h3\");\n          i0.ɵɵtext(12, \"Stored Items\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"table\", 5)(14, \"tr\")(15, \"th\");\n          i0.ɵɵtext(16, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"th\");\n          i0.ɵɵtext(18, \"Quantity\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"th\");\n          i0.ɵɵtext(20, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"th\");\n          i0.ɵɵtext(22, \"Actions\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(23, DashboardComponent_tr_23_Template, 12, 3, \"tr\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_24_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(25, \"Logout\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.inventoryForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", !ctx.editMode);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngForOf\", ctx.items);\n        }\n      },\n      dependencies: [ReactiveFormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, CommonModule, i4.NgForOf, i4.NgIf],\n      styles: [\"table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:8px}\"]\n    });\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}